@model CarServiceMS.Models.BindingModels.CarListingModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}



<html lang="en">
</html>
<head>
 
    <meta charset="utf-8" />
    <title>Table Style</title>
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;">

    <link rel="stylesheet" type="text/css" href="~/css/CarTable.css">
</head>

<body>


    <div class="table-title">
        <h3 align="center">Cars</h3>
    </div>
    @if (@Model.Cars != null)
    {
        @if (Model.Cars.Any())
        {

            <div>
                <table class="table-fill">
                    <thead>
                        <tr>
                            <th class="text-center">Brand</th>
                            <th class="text-center">Model</th>
                            <th class="text-center">Year From</th>
                            <th class="text-center">Number</th>
                            <th class="text-left"></th>
                            <th class="text-left"></th>

                        </tr>
                    </thead>
                    <tbody class="table-hover">


                        @foreach (var car in this.Model.Cars)
                        {
                            <tr>
                                <td class="text-center">@car.Brand</td>
                                <td class="text-center">@car.Model</td>
                                <td class="text-center">@car.YearFrom.Year</td>
                                <td class="text-center">@car.Number</td>
                                <td class="text-center">
                                    <button id="remove-button" onclick="showRemoveField(@car.Id)" class="badge-dark">Remove</button>
                                </td>
                                <td class="text-center">
                                    <a asp-controller="Car" asp-action="Edit" asp-route-id="@car.Id">
                                        <button class="badge-dark">Edit</button>
                                    </a>
                                </td>
                            </tr>
                            <tr id="@car.Id" style="display: none">
                                <td style="padding-right:10px; padding-left:10px" class="text-center" colspan="2">Your password:</td>
                                <form asp-controller="Car" asp-action="Remove" method="post">
                                    <td style="padding-right:10px; padding-left:10px" class="text-center" colspan="2">

                                        <input  asp-for="Password" type="password" size="20" />
                                        <span asp-validation-for="Password" class="text-danger"></span>
                                        <input asp-for="Id" type="hidden" value="@car.Id" />


                                    </td>
                                    <td style="padding-right:5px; padding-left:5px" class="text-center">

                                        <button type="submit" size="30" id="remove-button" onclick="showRemoveField(@car.Id)"
                                                class="badge-dark">
                                            Confirm
                                        </button>



                                    </td>
                                </form>
                               
                                <td style="padding-right:5px; padding-left:5px" class="text-center">
                                    <button id="remove-button" onclick="hiderRemoveField(@car.Id)"
                                            class="badge-dark">
                                        Cancel
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>

                </table>
            </div>
            <div class="d-flex justify-content-center">

                <a asp-controller="Car" asp-action="Create">
                    <button class="badge-dark">Add Your Car</button>
                </a>

            </div>
        }
        else
        {
            <h1 align="center">You do not have any cars!</h1>

            <div class="d-flex justify-content-center">

                <a asp-controller="Car" asp-action="Create">
                    <button class="badge-dark">Add Your Car</button>
                </a>

            </div>
        }
    }
    else
    {
        <h1 align="center">You do not have any cars!</h1>

        <div class="d-flex justify-content-center">

            <a asp-controller="Car" asp-action="Create">
                <button class="badge-dark">Add Your Car</button>
            </a>

        </div>
    }

</body>

<script>

    function showRemoveField(number) {

        let div = document.getElementById(number.toString());

        div.style.display = "table-row";
    }

    function hiderRemoveField(number){
        let div = document.getElementById(number.toString());

        div.style.display = "none";
    }
</script>

